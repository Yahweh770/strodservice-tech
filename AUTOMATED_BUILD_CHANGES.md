# Изменения в системе автоматической сборки EXE файлов

## Обзор

В проект была добавлена и улучшена система автоматической сборки исполняемых файлов с помощью GitHub Actions. Теперь при каждом изменении в коде происходит автоматическая сборка EXE файлов для всех поддерживаемых платформ.

## Основные изменения

### 1. Новые GitHub Actions Workflows

- **`.github/workflows/build-exe.yml`** - собирает EXE файл при каждом изменении в ветке main
- **`.github/workflows/build-exe-all-platforms.yml`** - собирает EXE файлы для всех платформ (Windows, Linux, macOS) при каждом изменении

### 2. Улучшенные скрипты сборки

#### Linux/macOS (`build-pyinstaller.sh`):
- Добавлена проверка наличия необходимых файлов перед сборкой
- Улучшена установка зависимостей с предварительным обновлением pip
- Добавлена проверка наличия базы данных и создание пустой если она отсутствует
- Изменен режим сборки с `--windowed` на `--console` для лучшей отладки
- Добавлен вывод списка файлов в директории dist после успешной сборки

#### Windows (`build-release.bat`):
- Добавлена проверка наличия необходимых файлов перед сборкой
- Улучшена установка зависимостей с предварительным обновлением pip
- Добавлена проверка наличия базы данных и создание пустой если она отсутствует
- Упрощена логика сборки (удалено использование WSL)

### 3. Улучшенная документация

- **`BUILD_SYSTEM_README.md`** - полное руководство по системе сборки
- Обновлен **`README.md`** - добавлена информация о новой системе автоматической сборки

## Исправленные ошибки

1. **Проблема с отсутствием файлов**: Скрипты теперь проверяют наличие необходимых файлов перед началом сборки
2. **Проблема с базой данных**: Если файл базы данных `pto_docs.db` отсутствует, он создается автоматически
3. **Проблема с зависимостями**: Улучшена установка зависимостей с предварительным обновлением pip
4. **Проблема с совместимостью**: Улучшена совместимость скриптов сборки с разными платформами

## Особенности новой системы

### Автоматическая сборка
- Срабатывает при каждом пуше в ветку `main`
- Срабатывает при создании Pull Request
- Собирает исполняемые файлы для Windows, Linux и macOS
- Загружает артефакты для последующего скачивания

### Совместимость
- Поддержка всех основных операционных систем
- Создание standalone исполняемых файлов без необходимости установки Python
- Включение всех необходимых зависимостей в один файл

### Удобство использования
- Простое скачивание готовых артефактов из GitHub Actions
- Единая точка входа в приложение через `main.py`
- Сохранение всех функций приложения в скомпилированной версии

## Интеграция с существующей системой релизов

Новая система сборки дополняет существующую систему релизов:
- Система релизов по-прежнему работает при создании тегов (для официальных релизов)
- Новая система сборки работает при каждом изменении (для промежуточных сборок)
- Обе системы используют одни и те же скрипты сборки для согласованности

## Тестирование

Система была протестирована и подтверждена:
- Локальная сборка проходит успешно
- GitHub Actions корректно собирают артефакты
- Собранные исполняемые файлы работают корректно
- Все функции приложения сохранены в скомпилированной версии